# Log MCP Server

è¿™æ˜¯ä¸€ä¸ªåŸºäº Kotlin å¼€å‘çš„ Model Context Protocol (MCP) Serverï¼Œä¸“é—¨ç”¨äºMCPçš„å­¦ä¹ demoã€‚å®ƒéµå¾ª MCP æ ‡å‡†ï¼Œå¯ä»¥è½»æ¾é›†æˆåˆ°æ”¯æŒ MCP çš„ AI åŠ©æ‰‹ï¼ˆå¦‚ Traeï¼‰ä¸­ï¼Œèµ‹äºˆ AI ç›´æ¥è¯»å–å’Œç­›é€‰æœ¬åœ°æ—¥å¿—çš„èƒ½åŠ›ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

*   **å¤šç»´åº¦ç­›é€‰**ï¼šæ”¯æŒç»„åˆä½¿ç”¨ä»¥ä¸‹æ¡ä»¶ç­›é€‰æ—¥å¿—ï¼š
    *   **å…³é”®è¯ (Keyword)**ï¼šæ¨¡ç³ŠåŒ¹é…æ—¥å¿—å†…å®¹ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ã€‚
    *   **æ—¥å¿—çº§åˆ« (Log Level)**ï¼šç²¾ç¡®åŒ¹é… INFO, WARN, ERROR ç­‰çº§åˆ«ã€‚
    *   **æ—¶é—´èŒƒå›´ (Time Range)**ï¼šæŒ‡å®šå¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ï¼ˆæ ¼å¼ï¼šYYYY-MM-DD HH:MM:SSï¼‰ã€‚
*   **åˆ†é¡µæ”¯æŒ**ï¼šæ”¯æŒ `limit` å’Œ `offset` å‚æ•°ï¼Œå¤„ç†å¤§æ–‡ä»¶æ—¶æ›´é«˜æ•ˆã€‚
*   **ç»“æ„åŒ–è¾“å‡º**ï¼šè¿”å› JSON æ ¼å¼çš„ç»“æ„åŒ–æ•°æ®ï¼Œæ–¹ä¾¿ AI è§£æå’Œå±•ç¤ºã€‚
*   **Kotlin å®ç°**ï¼šåˆ©ç”¨ Kotlin åç¨‹å’Œåºåˆ—ï¼ˆSequenceï¼‰é«˜æ•ˆå¤„ç†æ–‡ä»¶ I/Oã€‚

## ğŸ› ï¸ é¡¹ç›®ç»“æ„

*   `kotlin-mcp-server`: MCP Server çš„æ ¸å¿ƒå®ç°ã€‚
*   `kotlin-mcp-client`: ç”¨äºæµ‹è¯•å’Œæ¼”ç¤ºçš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯ã€‚
*   `sample_logs`: åŒ…å«æµ‹è¯•ç”¨çš„ç¤ºä¾‹æ—¥å¿—æ–‡ä»¶ (`app.log`)ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚
*   JDK 17+
*   Gradle (é¡¹ç›®åŒ…å« Gradle Wrapperï¼Œå¯ç›´æ¥ä½¿ç”¨)

### 1. æ„å»º Server
é¦–å…ˆï¼Œæ„å»ºåŒ…å«æ‰€æœ‰ä¾èµ–çš„å¯æ‰§è¡Œ Jar åŒ…ï¼š

```bash
gradle :kotlin-mcp-server:fatJar
```
æ„å»ºå®Œæˆåï¼ŒJar åŒ…ä½äº `kotlin-mcp-server/build/libs/kotlin-mcp-server-all.jar`ã€‚

### 2. è¿è¡Œ Client (æµ‹è¯•)
ä½¿ç”¨å†…ç½®çš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯æ¥éªŒè¯ Server æ˜¯å¦å·¥ä½œæ­£å¸¸ï¼š

```bash
gradle :kotlin-mcp-client:run
```
å®¢æˆ·ç«¯å¯åŠ¨åï¼Œæ‚¨å¯ä»¥äº¤äº’å¼åœ°è¾“å…¥æŸ¥è¯¢æ¡ä»¶ã€‚

## ğŸ”Œ æ¥å…¥ Trae IDE

å°†æ­¤ MCP Server æ¥å…¥ Traeï¼Œè®© AI åŠ©æ‰‹ç›´æ¥å¸®æ‚¨æŸ¥æ—¥å¿—ã€‚

1.  **æ‰“å¼€è®¾ç½®**ï¼šç‚¹å‡» Trae å·¦ä¸‹è§’çš„è®¾ç½®å›¾æ ‡ -> "MCP Servers"ã€‚
2.  **ç¼–è¾‘é…ç½®**ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```json
{
  "mcpServers": {
    "log-server": {
      "command": "java",
      "args": [
        "-jar",
        "/ç»å¯¹è·¯å¾„/åˆ°/æ‚¨çš„/é¡¹ç›®/log-mcp/kotlin-mcp-server/build/libs/kotlin-mcp-server-all.jar"
      ]
    }
  }
}
```
*è¯·å°†è·¯å¾„æ›¿æ¢ä¸ºæ‚¨æœ¬åœ°çš„å®é™…ç»å¯¹è·¯å¾„ã€‚*

3.  **ä½¿ç”¨**ï¼š
    æ‚¨å¯ä»¥åœ¨å¯¹è¯ä¸­ç›´æ¥è¦æ±‚ AIï¼š
    > "å¸®æˆ‘æŸ¥ä¸€ä¸‹æœ€è¿‘çš„ ERROR æ—¥å¿—"
    > "æœç´¢åŒ…å« 'Database' çš„æ—¥å¿—"
    > "æŸ¥çœ‹ 2024-05-20 çš„æ‰€æœ‰æ—¥å¿—"

## ğŸ“š å·¥å…·å®šä¹‰ (Tool Definition)

Server æš´éœ²äº†ä¸€ä¸ªåä¸º `call` çš„å·¥å…·ã€‚

### å‚æ•°è¯´æ˜

| å‚æ•°å | ç±»å‹ | å¿…å¡« | æè¿° | ç¤ºä¾‹ |
| :--- | :--- | :--- | :--- | :--- |
| `log_path` | string | **æ˜¯** | æ—¥å¿—æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ | `/var/log/app.log` |
| `keyword` | string | å¦ | ç­›é€‰å…³é”®è¯ | `Database` |
| `log_level` | string | å¦ | æ—¥å¿—çº§åˆ« (INFO/WARN/ERROR) | `ERROR` |
| `start_time` | string | å¦ | å¼€å§‹æ—¶é—´ | `2024-05-20 00:00:00` |
| `end_time` | string | å¦ | ç»“æŸæ—¶é—´ | `2024-05-20 23:59:59` |
| `limit` | number | å¦ | è¿”å›æœ€å¤§æ¡æ•° (é»˜è®¤ 2000) | `100` |
| `offset` | number | å¦ | åç§»é‡ | `0` |

---
**License**: MIT
